<!DOCTYPE html>
<html lang="en">
    
    <style>
        body
        {
            font-family: "Times New Roman", Helvetica, Tahoma, Arial,   LXGW WenKai   "notoserifsc-medium", "Microsoft YaHei", "Hiragino Sans GB", "WenQuanYi Micro Hei", sans-serif !important;

        }
    </style>

    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0,  viewport-fit=cover" name="viewport" />
    <meta name="description" content="MyBatisï¼šæ³¨è§£æ“ä½œ" />
    <meta name="hexo-theme-A4" content="v1.8.5" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.png">
    <title>å­å¤œçš„æ˜Ÿ | ä¸ªäººBlog</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    
    
    <link href="
https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css
" rel="stylesheet">

<meta name="generator" content="Hexo 7.1.1"></head>
    
    <style>
        :root {
            --waline-theme-color: #9e5345; 
            --waline-color: #9e5345; 
            --waline-border-color: #9e5345; 
            --waline-white: #9e5345; 
            --waline-bgcolor-light: #FAF5E3;  
        }
        body {
            color: #9e5345;
            background: #E9DEC8;
        }
        .post-md code {
            background: #e8e0c9;
            color: #2e5041; 
        }
        .post-md pre, .post-md .highlight {
            background: #e8e0c9;
            color: #2e5041; 
        }
        pre .string, pre .value, pre .inheritance, pre .header, pre .ruby .symbol, pre .xml .cdata {
            color: #9e5345;
        }
        pre .number, pre .preprocessor, pre .built_in, pre .literal, pre .params, pre .constant {
            color: #9e5345;
        }
        .year-font-color {
            color: #9e5345 !important;
        }
        .wl-card span.wl-nick {
            color: #9e5345; 
        }
        .wl-card .wl-badge {
            border: 1px solid #9e5345;
            color: #9e5345; 
        }
        .wl-btn {
            border: 1px solid #9e5345; 
            color:  #9e5345;  
        }
        .wl-btn.primary {
            color: #FAF5E3; 
        }
        .wl-header label {
            color: #9e5345;
        }
        a {
            color: #C58E04;
        }

        .post-md a {
            color: #C58E04;
        }

        .nav li a {
            color: #C58E04;
        }

        .archive-main a:link {
            color: #C58E04;
        }
        .archive-main a:visited {
            color: #9c9caf; 
        }

        .archive li span {
            color: #9e5345;
        }

        .post-main-title {
            color: #9e5345;
        }

        .post-md h1,
        .post-md h2,
        .post-md h3,
        .post-md h4,
        .post-md h5,
        .post-md h6 {
            color: #9e5345;
        }

        [data-waline] p {
            color: #9e5345;
        }
        [data-waline] a {
            color: #9e5345;
        } 
        .wl-sort li.active {
            color: #9e5345;
        }

        .wl-card .wl-meta>span {
            background: #FAF5E3;
        }

        .paper {
            background: #E9DEC8;
        }

        .index-main {
            background: #FAF5E3;
        }

        .paper-main {
            background: #FAF5E3;
        }

        .wl-panel {
            background: #FAF5E3;
        }

        .archive li:nth-child(odd) {
            background: #FAF5E3;
            ;
        }

        .archive li:nth-child(even) {
            background: #FAF5E3;
        }

        .post-md>table tr:nth-child(odd) td {
            background: #FAF5E3;
        }

        .post-md>table tr:nth-child(even) td {
            background: #FAF5E3;
        }

    
        .progress-wrap::after {
            color: #9e5345; /* ç®­å¤´çš„é¢œè‰² */
        }
        .progress-wrap svg.progress-circle path {
	        stroke: #9e5345; /* è¾¹æ¡†çš„é¢œè‰² */
        }
        .progress-wrap::before {
	        background-image: linear-gradient(298deg, #C58E04, #C58E04); /* é¼ æ ‡æ»‘è¿‡çš„ç®­å¤´é¢œè‰² */
         }

         .left-toc-container::-webkit-scrollbar-thumb {
            background-color: #9e5345; /* è®¾ç½®æ»šåŠ¨æ¡æ‹–åŠ¨å—çš„é¢œè‰² */
        }

        .bs-docs-sidebar .nav>.active>a,
        .bs-docs-sidebar .nav>li>a:hover,
        .bs-docs-sidebar .nav>li>a:focus {
            color: #C58E04;
            border-left-color: #C58E04;
        }
        .bs-docs-sidebar .nav>li>a {
            color:  #9e5345;
        }
    </style>

    
    <body>
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.png" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">å­å¤œçš„æ˜Ÿ</a> 
            <span class="description">ç»ˆç”Ÿå­¦ä¹ è€…ï½œé˜…è¯»çˆ±å¥½è€…</span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« </a></li>
            
        
            
                <li><a href="/tags/">åˆ†ç±»</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">

    
        <div class="post-main-title">
            MyBatisï¼šæ³¨è§£æ“ä½œ
        </div>
      
    

    <div class="post-md">
        
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h1>ä¸€ã€MyBatis ä»‹ç»</h1>
<p><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh_CN/index.html">MyBatis</a>æ˜¯ä¸€ä¸ªä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œä¸»è¦ç”¨äºç®€åŒ–ç¨‹åºä¸æ•°æ®åº“ä¹‹é—´çš„äº¤äº’æ“ä½œã€‚æ‰€è°“çš„æŒä¹…å±‚ï¼Œé€šå¸¸æ˜¯æŒ‡æ•°æ®è®¿é—®å±‚ï¼ˆDAOï¼‰ï¼Œå®ƒè´Ÿè´£ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼ŒåŒ…æ‹¬æ•°æ®çš„å¢åˆ æ”¹æŸ¥ç­‰æ“ä½œã€‚<a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh_CN/index.html">MyBatis</a>é€šè¿‡ç®€åŒ–è¿™äº›æ“ä½œï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´åŠ ä¾¿æ·åœ°å®ç°æ•°æ®åº“æ“ä½œï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒMyBatiså°±æ˜¯ä¸€ä¸ªç®€åŒ–æ•°æ®åº“æ“ä½œå’Œè¯»å–çš„å·¥å…·ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿæ›´åŠ è½»æ¾åœ°å¤„ç†æ•°æ®åº“ç›¸å…³ä»»åŠ¡ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/1710496351040-8c85ebce-a7fd-4815-b97e-777381848b66.png" title="img" class="gallery-item" style="box-shadow: none;"> <img src="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/1710496351040-8c85ebce-a7fd-4815-b97e-777381848b66.png" alt="img"></a></p>
<p>Mybatisæ“ä½œæ•°æ®åº“çš„æ­¥éª¤ä¸€èˆ¬ä¸ºä»¥ä¸‹å››æ­¥ï¼š</p>
<ol>
<li>å‡†å¤‡å·¥ä½œ(åˆ›å»ºspringbootâ¼¯ç¨‹ã€æ•°æ®åº“è¡¨å‡†å¤‡ã€å®ä½“ç±»)</li>
<li>å¼•å…¥Mybatisçš„ç›¸å…³ä¾èµ–ï¼Œé…ç½®Mybatis(æ•°æ®åº“è¿æ¥ä¿¡æ¯)</li>
<li>ç¼–å†™SQLè¯­å¥(æ³¨è§£/XML)</li>
<li>æµ‹è¯•</li>
</ol>
<p>è¿™ç¯‡ç¬”è®°è®°å½•çš„æ˜¯MyBatisçš„æ³¨è§£çš„åŸºç¡€ç”¨æ³•å’Œæ“ä½œã€‚</p>
<h2 id="1ã€åˆ›å»ºé¡¹ç›®">1ã€åˆ›å»ºé¡¹ç›®</h2>
<p>åˆ›å»ºspringbootâ¼¯ç¨‹ï¼Œå¹¶å¯¼å…¥mybatisçš„èµ·æ­¥ä¾èµ–ã€mysqlçš„é©±åŠ¨åŒ…</p>
<p><a target="_blank" rel="noopener" href="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318163539170.png" title="image-20240318163539170" class="gallery-item" style="box-shadow: none;"> <img src="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318163539170.png" alt="image-20240318163539170"></a></p>
<p>é¡¹ç›®åˆ›å»ºå®Œæˆåï¼Œä¼šè‡ªåŠ¨åœ¨pom.xmlæ–‡ä»¶ä¸­ï¼Œå¯¼å…¥Mybatisä¾èµ–å’ŒMySQLé©±åŠ¨ä¾èµ–</p>
<p><a target="_blank" rel="noopener" href="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318164001202.png" title="image-20240318164001202" class="gallery-item" style="box-shadow: none;"> <img src="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318164001202.png" alt="image-20240318164001202"></a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--MyBatis--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- MySQL--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2ã€æ•°æ®å‡†å¤‡">2ã€æ•°æ®å‡†å¤‡</h2>
<p>è¿™é‡Œä»¥ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ä¿¡æ¯è¡¨ä¸ºä¾‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `userinfo` (</span><br><span class="line">  `id` <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `username` <span class="type">VARCHAR</span>(<span class="number">127</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `password` <span class="type">VARCHAR</span>(<span class="number">127</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `age` TINYINT(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `gender` TINYINT(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;1-ç”·, 2-å¥³, 0-é»˜è®¤&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">VARCHAR</span>(<span class="number">15</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `delete_flag` TINYINT(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;0-æ­£å¸¸, 1-åˆ é™¤&#x27;</span>,</span><br><span class="line">  `create_time` DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  `update_time` DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®è¿™ä¸ªè¡¨ï¼Œåˆ›å»ºå¯¹åº”çš„å®ä½“ç±»<code>UserInfo</code>ï¼Œå®ä½“ç±»çš„å±æ€§åä¸è¡¨ä¸­çš„å­—æ®µååº”è¯¥æ˜¯ç›¸å¯¹åº”çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserInfo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> Integer deleteFlag;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3ã€é…ç½®è¿æ¥ä¿¡æ¯">3ã€é…ç½®è¿æ¥ä¿¡æ¯</h2>
<p>Mybatisä¸­è¦è¿æ¥æ•°æ®åº“ï¼Œéœ€è¦æ•°æ®åº“ç›¸å…³å‚æ•°é…ç½®ï¼š</p>
<ol>
<li>MySQLé©±åŠ¨ç±»</li>
<li>ç™»å½•å</li>
<li>å¯†ç </li>
<li>æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318164813011.png" class="gallery-item" style="box-shadow: none;"> <img src="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318164813011.png" alt=""></a></p>
<p>å¦‚æœæ˜¯<code>application.yml</code>æ–‡ä»¶ï¼Œåˆ™é…ç½®å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/æ•°æ®åº“å?characterEncoding=utf8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span>   <span class="comment"># æ•°æ®åº“ç”¨æˆ·å</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">11111</span>  <span class="comment"># æ•°æ®åº“å¯†ç </span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯<code>application.properties</code>æ–‡ä»¶ï¼Œåˆ™é…ç½®å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/æ•°æ®åº“å?characterEncoding=utf8&amp;useSSL=false</span></span><br><span class="line"><span class="comment"># æ•°æ®åº“åç§°</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="comment"># æ•°æ®åº“å¯†ç </span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">11111</span></span><br></pre></td></tr></table></figure>
<h2 id="4ã€ç¼–å†™æŒä¹…å±‚ä»£ç ">4ã€ç¼–å†™æŒä¹…å±‚ä»£ç </h2>
<p>åœ¨é¡¹ç›®çš„mapperå±‚ä¸­ï¼Œåˆ›å»ºæŒä¹…å±‚æ¥å£<code>UserInfoMapper</code>ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318165502658.png" title="image-20240318165502658" class="gallery-item" style="box-shadow: none;"> <img src="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318165502658.png" alt="image-20240318165502658"></a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mybatisdemo.mapper;</span><br><span class="line"><span class="keyword">import</span> com.example.mybatisdemo.model.UserInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserInfoMap</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from userinfo&quot;)</span></span><br><span class="line">    List&lt;UserInfo&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from userinfo where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    UserInfo <span class="title function_">selectById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@Mapper</code>ï¼šè¿™ä¸ªæ³¨è§£æ˜¯ç”¨æ¥æ ‡è®°æ¥å£æ˜¯ä¸€ä¸ªMyBatisçš„æ˜ å°„å™¨ã€‚å½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼ŒMyBatisä¼šå¤„ç†è¿™ä¸ªæ¥å£ï¼Œå¹¶åœ¨è¿è¡Œæ—¶ä¸ºå…¶åˆ›å»ºä¸€ä¸ªå®ç°ã€‚è¿™ä¸ªå®ç°å°†è´Ÿè´£å®é™…çš„æ•°æ®åº“äº¤äº’ã€‚<code>public interface UserInfoMap</code>ï¼šè¿™è¡Œä»£ç å£°æ˜äº†ä¸€ä¸ªåä¸º<code>UserInfoMap</code>çš„å…¬å…±æ¥å£ã€‚åœ¨MyBatisä¸­ï¼Œæ˜ å°„å™¨é€šå¸¸å®šä¹‰ä¸ºæ¥å£ï¼Œæ¥å£ä¸­çš„æ¯ä¸ªæ–¹æ³•éƒ½å¯¹åº”ä¸€ä¸ªæ•°æ®åº“æ“ä½œã€‚</p>
<p><code>@Select(&quot;select * from userinfo where id = #&#123;id&#125;&quot;)</code>ï¼šè¿™ä¸ªæ³¨è§£ç”¨æ¥æŒ‡å®šä¸€ä¸ªSQLæŸ¥è¯¢è¯­å¥ã€‚<code>#&#123;id&#125;</code>å ä½ç¬¦æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå°†ä¼šä¸æ–¹æ³•<code>selectById</code>ä¸­çš„å‚æ•°<code>id</code>ç»‘å®šã€‚MyBatiså°†ä¼šç”¨å®é™…ä¼ é€’ç»™<code>selectById</code>æ–¹æ³•çš„å€¼æ›¿æ¢è¿™ä¸ªå ä½ç¬¦ã€‚</p>
<h2 id="5ã€è¿›è¡Œå•å…ƒæµ‹è¯•">5ã€è¿›è¡Œå•å…ƒæµ‹è¯•</h2>
<p>åœ¨éœ€è¦å†™å•å…ƒæµ‹è¯•çš„ç±»ä¸­ï¼ŒGenerateï¼Œé€‰æ‹© Test</p>
<p><a target="_blank" rel="noopener" href="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/1710497128277-6fb0977d-9003-400d-9cac-613afc0f8c1d.png" title="img" class="gallery-item" style="box-shadow: none;"> <img src="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/1710497128277-6fb0977d-9003-400d-9cac-613afc0f8c1d.png" alt="img"></a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfoMapTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserInfoMap userInfoMap;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">selectAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;UserInfo&gt; list = userInfoMap.selectAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@SpringBootTest</code>ï¼šè¿™ä¸ªæ³¨è§£æ˜¯ç”¨æ¥æ ‡è®°æµ‹è¯•ç±»ï¼Œå®ƒä¼šå‘Šè¯‰Spring Bootå¯åŠ¨æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„ beans å’Œé…ç½®ã€‚è¿™æ ·ï¼Œæµ‹è¯•å°±å¯ä»¥åœ¨ä¸€ä¸ªæ¥è¿‘çœŸå®è¿è¡Œç¯å¢ƒçš„ç¯å¢ƒä¸­æ‰§è¡Œã€‚</p>
<p><code>@Autowired</code>ï¼šè¿™ä¸ªæ³¨è§£ç”¨äºè‡ªåŠ¨æ³¨å…¥UserInfoMapç±»å‹çš„beanã€‚Springä¼šè‡ªåŠ¨æŸ¥æ‰¾UserInfoMapæ¥å£çš„å®ä¾‹ï¼Œå¹¶å°†å…¶æ³¨å…¥åˆ°userInfoMapå­—æ®µä¸­ã€‚è¿™æ ·ï¼Œåœ¨æµ‹è¯•ç±»ä¸­å°±å¯ä»¥ç›´æ¥ä½¿ç”¨userInfoMapæ¥è°ƒç”¨æ˜ å°„å™¨æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚</p>
<p><code>@Test</code>ï¼šè¿™ä¸ªæ³¨è§£æ¥è‡ªJUnitæµ‹è¯•æ¡†æ¶ï¼Œç”¨äºæ ‡è®°ä¸€ä¸ªæ–¹æ³•ä½œä¸ºæµ‹è¯•æ–¹æ³•ã€‚å½“è¿è¡Œæµ‹è¯•æ—¶ï¼Œæ‰€æœ‰æ ‡è®°æœ‰@Testçš„æ–¹æ³•éƒ½ä¼šè¢«æ‰§è¡Œã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒselectAllæ–¹æ³•å°±æ˜¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ã€‚</p>
<h1>äºŒã€åŸºç¡€æ“ä½œ</h1>
<h2 id="1ã€å‚æ•°ä¼ é€’">1ã€å‚æ•°ä¼ é€’</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserInfoMap</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from userinfo where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    UserInfo <span class="title function_">selectById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>#&#123;&#125;</code>çš„æ–¹å¼è·å–æ–¹æ³•ä¸­çš„å‚æ•°ï¼Œåœ¨<code>selectById</code>æ–¹æ³•ä¸­æ·»åŠ â¼€ä¸ªå‚æ•°<code>(id)</code>ï¼Œå°†æ–¹æ³•ä¸­çš„å‚æ•°ï¼Œä¼ ç»™SQLè¯­å¥ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318171021252.png" title="image-20240318171021252" class="gallery-item" style="box-shadow: none;"> <img src="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318171021252.png" alt="image-20240318171021252"></a></p>
<h2 id="2ã€æ–°å¢">2ã€æ–°å¢</h2>
<p>Insertè¯­å¥é»˜è®¤è¿”å›çš„æ˜¯å—å½±å“çš„è¡Œæ•°ï¼Œæ–°å¢è¯­å¥å†™æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserInfoMap</span> &#123;</span><br><span class="line">    <span class="meta">@Insert(&quot;insert into userinfo (username,password,age,gender,phone)&quot;+</span></span><br><span class="line"><span class="meta">            &quot;values(#&#123;username&#125;,#&#123;password&#125;,#&#123;age&#125;,#&#123;gender&#125;,#&#123;phone&#125;)&quot;)</span></span><br><span class="line">    Integer <span class="title function_">insert</span><span class="params">(UserInfo userInfo)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹åº”çš„æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserInfoMap userInfoMap;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insert</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">UserInfo</span> <span class="variable">userInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserInfo</span>();</span><br><span class="line">    userInfo.setUsername(<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">    userInfo.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    userInfo.setAge(<span class="number">20</span>);</span><br><span class="line">    userInfo.setPhone(<span class="string">&quot;12345678901&quot;</span>);</span><br><span class="line">    userInfo.setGender(<span class="number">1</span>);</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">result</span> <span class="operator">=</span> userInfoMap.insert(userInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä½•æ‹¿åˆ°è‡ªå¢ IDï¼Ÿåœ¨Mapperæ¥å£çš„æ–¹æ³•ä¸Šæ·»åŠ â¼€ä¸ªOptionsçš„æ³¨è§£ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Options(useGeneratedKeys = true,keyProperty = &quot;id&quot;)</span></span><br><span class="line"><span class="meta">@Insert(&quot;insert into userinfo (username,password,age,gender,phone)&quot;+</span></span><br><span class="line"><span class="meta">        &quot;values(#&#123;username&#125;,#&#123;password&#125;,#&#123;age&#125;,#&#123;gender&#125;,#&#123;phone&#125;)&quot;)</span></span><br><span class="line">Integer <span class="title function_">insert</span><span class="params">(UserInfo userInfo)</span>;</span><br></pre></td></tr></table></figure>
<p><code>useGeneratedKeys</code> å’Œ <code>keyProperty</code> æ˜¯ MyBatis ä¸­ç”¨äºå¤„ç†æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®çš„å±æ€§ã€‚</p>
<ol>
<li><code>useGeneratedKeys</code>ï¼šè¿™ä¸ªå±æ€§ç”¨äºé€šçŸ¥ MyBatis åœ¨æ‰§è¡Œæ’å…¥æ“ä½œåï¼Œæ˜¯å¦éœ€è¦ä½¿ç”¨ JDBC çš„ <code>getGeneratedKeys</code> æ–¹æ³•æ¥è·å–æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®å€¼ã€‚ä¾‹å¦‚ï¼Œåœ¨ MySQL å’Œ SQL Server ä¸­ï¼Œå½“ä½ æœ‰ä¸€ä¸ªè‡ªåŠ¨é€’å¢çš„å­—æ®µä½œä¸ºä¸»é”®æ—¶ï¼Œä½ å¯ä»¥è®¾ç½®è¿™ä¸ªå±æ€§ä¸º <code>true</code>ï¼Œè¿™æ · MyBatis å°±ä¼šåœ¨æ’å…¥è®°å½•åè‡ªåŠ¨è·å–è¿™ä¸ªç”Ÿæˆçš„ä¸»é”®å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå±æ€§çš„å€¼æ˜¯ <code>false</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒMyBatis ä¸ä¼šè‡ªåŠ¨è·å–ç”Ÿæˆçš„ä¸»é”®å€¼ã€‚</li>
<li><code>keyProperty</code>ï¼šè¿™ä¸ªå±æ€§ç”¨äºæŒ‡å®šå“ªä¸ªå®ä½“ç±»å±æ€§çš„ field å°†ä¼šè¢«è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®å€¼å¡«å……ã€‚å½“ä½ è®¾ç½®äº† <code>useGeneratedKeys</code> ä¸º <code>true</code> æ—¶ï¼Œä½ éœ€è¦é€šè¿‡ <code>keyProperty</code> å‘Šè¯‰ MyBatis å®ä½“ç±»ä¸­å“ªä¸ªå±æ€§å¯¹åº”äºæ•°æ®åº“ä¸­çš„ä¸»é”®åˆ—ã€‚è¿™æ ·ï¼ŒMyBatis å°±ä¼šåœ¨æ’å…¥è®°å½•åï¼Œå°†è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®å€¼èµ‹ç»™å®ä½“ç±»ä¸­æŒ‡å®šçš„å±æ€§ã€‚å¦‚æœä½ æ²¡æœ‰è®¾ç½® <code>keyProperty</code>ï¼ŒMyBatis å°±ä¸ä¼šå°†è·å–åˆ°çš„ä¸»é”®å€¼èµ‹ç»™ä»»ä½•å±æ€§ã€‚</li>
</ol>
<h2 id="3ã€åˆ é™¤">3ã€åˆ é™¤</h2>
<p>Mapperæ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserInfoMap</span> &#123;</span><br><span class="line">    <span class="meta">@Delete(&quot;delete from userinfo where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    Integer <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹åº”çš„æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> UserInfoMap userInfoMap;    </span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="type">Integer</span> <span class="variable">result</span> <span class="operator">=</span> userInfoMap.delete(<span class="number">10</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="4ã€æ›´æ–°">4ã€æ›´æ–°</h2>
<p>Mapperæ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserInfoMap</span> &#123;</span><br><span class="line">    <span class="meta">@Update(&quot;update userinfo set age = #&#123;age&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    Integer <span class="title function_">update</span><span class="params">(UserInfo userInfo)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹åº”çš„æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> UserInfoMap userInfoMap;        </span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="type">UserInfo</span> <span class="variable">userInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserInfo</span>();</span><br><span class="line">       userInfo.setId(<span class="number">9</span>);</span><br><span class="line">       userInfo.setAge(<span class="number">30</span>);</span><br><span class="line">       <span class="type">Integer</span> <span class="variable">result</span> <span class="operator">=</span> userInfoMap.update(userInfo);</span><br><span class="line">       <span class="keyword">if</span>(result&gt;<span class="number">0</span>)&#123;</span><br><span class="line">           log.info(<span class="string">&quot;update:&#123;&#125;&quot;</span>,result);</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           log.info(<span class="string">&quot;update:æ›´æ–°å¤±è´¥&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="5ã€æŸ¥æ‰¾">5ã€æŸ¥æ‰¾</h2>
<p>åœ¨æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢æ“ä½œæ—¶ï¼ŒMyBatis é»˜è®¤æƒ…å†µä¸‹ä¼šæ ¹æ® Java å¯¹è±¡çš„å±æ€§åä¸æ•°æ®åº“å­—æ®µåçš„å¯¹åº”å…³ç³»è¿›è¡Œè‡ªåŠ¨æ˜ å°„ã€‚å…·ä½“æ¥è¯´ï¼ŒMyBatis ä¼šå°†æŸ¥è¯¢ç»“æœé›†ä¸­æ¯ä¸ªå­—æ®µçš„å€¼èµ‹ç»™ä¸ä¹‹åç§°ç›¸åŒçš„ Java å¯¹è±¡å±æ€§ã€‚å¦‚æœ Java å¯¹è±¡çš„å±æ€§åä¸æ•°æ®åº“å­—æ®µåä¸å®Œå…¨åŒ¹é…ï¼Œé‚£ä¹ˆè¿™äº›å±æ€§åœ¨æŸ¥è¯¢ç»“æœä¸­å¯èƒ½ä¼šæ˜¾ç¤ºä¸º nullï¼Œå› ä¸ºæ²¡æœ‰æ‰¾åˆ°ä¸ä¹‹å¯¹åº”çš„å­—æ®µå€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;SELECT id, username, `password`, age, gender, phone, delete_flag, &quot; +</span></span><br><span class="line"><span class="meta">        &quot;create_time, update_time &quot; +</span></span><br><span class="line"><span class="meta">        &quot;FROM userinfo&quot;)</span></span><br><span class="line">List&lt;UserInfo&gt; <span class="title function_">selectAllUser</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318172411484.png" title="image-20240318172411484" class="gallery-item" style="box-shadow: none;"> <img src="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318172411484.png" alt="image-20240318172411484"></a></p>
<p>å°½ç®¡ SQL è¯­å¥ä¸­åŒ…å«äº† delete_flagã€create_time å’Œ update_time å­—æ®µçš„æŸ¥è¯¢ï¼Œä½†ç”±äºè¿™äº›å­—æ®µåä¸ Java å¯¹è±¡çš„å±æ€§åä¸å®Œå…¨ä¸€è‡´ï¼Œå¯¼è‡´æŸ¥è¯¢ç»“æœä¸­æ²¡æœ‰ä¸ºè¿™äº›å±æ€§èµ‹å€¼ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318172803679.png" title="image-20240318172803679" class="gallery-item" style="box-shadow: none;"> <img src="https://zydx-520.oss-cn-beijing.aliyuncs.com/img/image-20240318172803679.png" alt="image-20240318172803679"></a></p>
<p>å› ä¸ºæ•°æ®åº“å­—æ®µåå’Œ Java å¯¹è±¡å±æ€§åä¹‹é—´å­˜åœ¨å·®å¼‚ï¼Œä¾‹å¦‚å¤§å°å†™ä¸åŒã€ä¸‹åˆ’çº¿ä¸é©¼å³°å‘½åæ³•çš„å·®å¼‚ç­‰å¯¼è‡´å­—æ®µåä¸å±æ€§åä¸åŒ¹é…ã€‚</p>
<h3 id="â… ã€ç»“æœæ˜ å°„">â… ã€ç»“æœæ˜ å°„</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;SELECT id, username, `password`, age, gender, phone, delete_flag, &quot; +</span></span><br><span class="line"><span class="meta">        &quot;create_time, update_time &quot; +</span></span><br><span class="line"><span class="meta">        &quot;FROM userinfo&quot;)</span></span><br><span class="line"><span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">    @Result(column = &quot;delete_flag&quot;, property = &quot;deleteFlag&quot;),</span></span><br><span class="line"><span class="meta">    @Result(column = &quot;create_time&quot;, property = &quot;createTime&quot;),</span></span><br><span class="line"><span class="meta">    @Result(column = &quot;update_time&quot;, property = &quot;updateTime&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line">List&lt;UserInfo&gt; <span class="title function_">selectAllUser</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<p><code>@Results(&#123; ... &#125;)</code>ï¼šè¿™ä¸ªæ³¨è§£ç”¨äºå®šä¹‰ç»“æœé›†æ˜ å°„ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªæˆ–å¤šä¸ª @Result æ³¨è§£ï¼Œæ¯ä¸ª @Result æ³¨è§£æŒ‡å®šäº†ä¸€ä¸ªæ•°æ®åº“å­—æ®µåˆ° Java å¯¹è±¡å±æ€§çš„æ˜ å°„ã€‚<code>@Result(column = &quot;delete_flag&quot;, property = &quot;deleteFlag&quot;)</code>ï¼šè¿™ä¸ªæ³¨è§£ç”¨äºå°†æŸ¥è¯¢ç»“æœä¸­çš„ delete_flag å­—æ®µæ˜ å°„åˆ° UserInfo ç±»ä¸­çš„ deleteFlag å±æ€§ã€‚</p>
<p>å¦‚æœå¸Œæœ›å…¶ä»–çš„ SQL æŸ¥è¯¢ä¹Ÿèƒ½å¤ç”¨è¿™ä¸ªæ˜ å°„å…³ç³»ï¼Œå¯ä»¥ä½¿ç”¨ MyBatis çš„ @ResultMap æ³¨è§£æ¥å®šä¹‰ä¸€ä¸ªç»“æœæ˜ å°„ï¼Œç„¶ååœ¨å…¶ä»–çš„æŸ¥è¯¢æ–¹æ³•ä¸­å¼•ç”¨è¿™ä¸ªç»“æœæ˜ å°„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;SELECT id, username, `password`, age, gender, phone, delete_flag, &quot; +</span></span><br><span class="line"><span class="meta">        &quot;create_time, update_time &quot; +</span></span><br><span class="line"><span class="meta">        &quot;FROM userinfo&quot;)</span></span><br><span class="line"><span class="meta">@Results(id = &quot;resultMap&quot;, value = &#123;</span></span><br><span class="line"><span class="meta">    @Result(column = &quot;delete_flag&quot;, property = &quot;deleteFlag&quot;),</span></span><br><span class="line"><span class="meta">    @Result(column = &quot;create_time&quot;, property = &quot;createTime&quot;),</span></span><br><span class="line"><span class="meta">    @Result(column = &quot;update_time&quot;, property = &quot;updateTime&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line">List&lt;UserInfo&gt; <span class="title function_">selectAllUser</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Select(&quot;SELECT id, username, `password`, age, gender, phone, delete_flag, &quot; +</span></span><br><span class="line"><span class="meta">        &quot;create_time, update_time &quot; +</span></span><br><span class="line"><span class="meta">        &quot;FROM userinfo &quot; +</span></span><br><span class="line"><span class="meta">        &quot;WHERE id = #&#123;userid&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ResultMap(&quot;resultMap&quot;)</span></span><br><span class="line">UserInfo <span class="title function_">selectById</span><span class="params">(Integer id)</span>;</span><br></pre></td></tr></table></figure>
<h3 id="â…¡ã€å¼€å¯é©¼å³°å‘½å">â…¡ã€å¼€å¯é©¼å³°å‘½å</h3>
<p>é€šå¸¸æ•°æ®åº“åˆ—é‡‡ç”¨è›‡å½¢å‘½åæ³•ï¼ˆå³ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å„ä¸ªå•è¯ï¼‰ï¼Œè€ŒJavaå¯¹è±¡çš„å±æ€§åˆ™éµå¾ªé©¼å³°å‘½åæ³•ï¼ˆå³é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä½™å•è¯é¦–å­—æ¯å°å†™ï¼‰ã€‚ä¸ºäº†åœ¨è¿™ä¸¤ç§å‘½åæ–¹å¼ä¹‹é—´å®ç°è‡ªåŠ¨æ˜ å°„ï¼Œéœ€è¦åœ¨MyBatisé…ç½®ä¸­è®¾ç½®<code>mapUnderscoreToCamelCase</code>å±æ€§ä¸º<code>true</code>ã€‚å¼€å¯ä¹‹åï¼Œè¡¨ä¸­å­—æ®µåï¼šabc_xyz ä¼šè‡ªåŠ¨æ˜ å°„æˆç±»ä¸­å±æ€§åï¼šabcXyz</p>
<p>åœ¨<code>application.yml</code>æ–‡ä»¶ä¸­åŠ å…¥ä¸‹æ–¹é…ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">configuration:</span>  </span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2023-11-21</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« å­å¤œ</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tags/MyBatis/'>
                            MyBatis
                        </a>
                    
                </span>
             
             
        
        </i>
    </div>
    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            Â© 2022-2024 Blog 

            
                

            
        </span>
    
</div>
<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>ğŸŒ¦ï¸æ™¯é›¨åˆè¿‡çˆ½æ°”æ¸…ï¼Œç‰æ³¢è¡æ¼¾ç”»æ¡¥å¹³ã€‚</span>
            
                <span class="footer-last-span-right"><i>æœ¬ç«™ç”±<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>é©±åŠ¨</i></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    
    
    
<script src="/js/highlight.min.js"></script>

    
<script src="/js/highlightjs-line-numbers.js"></script>


    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="/js/returnToTop.js"></script>

    

    



<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>


                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>


</html>